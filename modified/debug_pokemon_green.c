PC = 0x100
{
	nop
	jp	0x0150
}

PC = 0x150
{
	jp	0x9da
}

PC = 0x9da
{
	0x9da:  di
	0x9db:  xor  A
	0x9dc:  ld   (0xff00+0x0f), A	// IF_REGISTER = 0
	0x9de:  ld   (0xff00+0xff), A	// IE_REGISTER = 0
	0x9e0:  ld   (0xff00+0x43), A	// SCX_REGISTER = 0
	0x9e2:  ld   (0xff00+0x42), A	// SCY_REGISTER = 0
	0x9e4:  ld   (0xff00+0x01), A	// SB_REGISTER = 0 (serial transfer)
	0x9e6:  ld   (0xff00+0x02), A	// SC_REGISTER = 0 (serial transfer)
	0x9e8:  ld   (0xff00+0x4b), A	// WX_REGISTER = 0
	0x9ea:  ld   (0xff00+0x4a), A	// WY_REGISTER = 0
	0x9ec:  ld   (0xff00+0x06), A	// TMA_REGISTER = 0
	0x9ee:  ld   (0xff00+0x07), A	// TAC_REGISTER = 0
	0x9f0:  ld   (0xff00+0x47), A	// BGP_REGISTER = 0
	0x9f2:  ld   (0xff00+0x48), A	// OBP0_REGISTER = 0
	0x9f4:  ld   (0xff00+0x49), A	// OBP1_REGISTER = 0
	0x9f6:  ld   A, 0x80
	0x9f8:  ld   (0xff00+0x40), A	// LCDC_REGISTER = 0x80 (ON)
	0x9fa:  call 0x0167::disable_lcdc()		// stack = 0x9fd

	0x9fd:  ld   SP, 0xdfff
	0xa00:  ld   HL, 0xc000
	0xa03:  ld   BC, 0x2000
__loop: // {0xc000 - 0xdfff} = 0 (RAM)
	0xa06:  ld   (HL), 0x00
	0xa08:  inc  HL
	0xa09:  dec  BC
	0xa0a:  ld   A, B
	0xa0b:  or   C					// A = A | C
	0xa0c:  jr   NZ, __loop			// if (A != 0) goto __loop
	0xa0e:  call 0x0a8c::reset_memory_range_8000_to_a000() // stack = 0xa11

	0xa11:  ld   HL, 0xff80
	0xa14:  ld   BC, 0x007f
	0xa17:  call 0x372a::set_HL_to_HL_plus_BC_with_A_value() // stack = 0xa1a

	0xa1a:  call 0x0188::reset_memory_range_c300_to_c3a0() // stack = 0xa1d

	0xa1d:  ld   A, 0x01			// A = 1
	0xa1f:  ld   (0xff00+0xb8), A	// (0xffb8) = 1
	0xa21:  ld   (0x2000), A		// *(0x2000) = 1 (switch ROM 1)
	0xa24:  call 0x4750::copy_memory_range_475e_4769_in_ff80() // stack = 0xa27

	0xa27:  xor  A
	0xa28:  ld   (0xff00+0xd7), A		// *(ffd7) = 0
	0xa2a:  ld   (0xff00+0x41), A		// STAT_REGISTER = 0
	0xa2c:  ld   (0xff00+0xae), A		// *(ffae) = 0
	0xa2e:  ld   (0xff00+0xaf), A		// *(ffaf) = 0
	0xa30:  ld   (0xff00+0x0f), A		// IF_REGISTER = 0
	0xa32:  ld   A, 0x0d				// A = 0x0d
	0xa34:  ld   (0xff00+0xff), A		// IE_REGISTER = 0
	0xa36:  ld   A, 0x90				// A = 0x90
	0xa38:  ld   (0xff00+0xb0), A		// *(ffb0) = 0
	0xa3a:  ld   (0xff00+0x4a), A		// *(ff4a) = 0
	0xa3c:  ld   A, 0x07				// A = 7
	0xa3e:  ld   (0xff00+0x4b), A		// *(ff4b) = 7
	0xa40:  ld   A, 0xff				// A = 255
	0xa42:  ld   (0xff00+0xaa), A		// *(ffaa) = 255
	0xa44:  ld   H, 0x98				//  H = 0x98
	0xa46:  call 0x0787::fill_1024_bytes_of_memory_with_127() // dest = 0x9800

	0xa49:  ld   H, 0x9c
	0xa4b:  call 0x0787::fill_1024_bytes_of_memory_with_127() // dest = 0x9c00

	0xa4e:  ld   A, 0xe3
	0xa50:  ld   (0xff00+0x40), A	// LCDC_REGISTER = 0xe3
	0xa52:  ld   A, 0x10
	0xa54:  ld   (0xff00+0x8a), A	// *(ff8a) = 16
	0xa56:  call 0x0a96::set_sound()	// stack = 0xa59

	0xa59:  ei
	0xa5a:  ld   A, 0x40 // stupide...
	0xa5c:  call 0x3e9d		// 0xa5f

	0xa5f:  ld   A, 0x1f
	0xa61:  ld   (0xc0ef), A	// *(c0ef) = 0x1f
	0xa64:  ld   (0xc0f0), A	// *(c0f0) = 0x1f
	0xa67:  ld   A, 0x9c
	0xa69:  ld   (0xffbd), A	// *(ffbd) = 0x9c
	0xa6c:  xor  A
	0xa6d:  ld   (0xffbc), A	// *(ffbc) = 0
	0xa70:  dec  A
	0xa71:  ld   (0xcfb2), A	// *(cfb2) = 255
	0xa74:  ld   A, 0x32
	0xa76:  call 0x3e9d

	0xa79:  call 0x0167

	0xa7c:  call 0x0a8c

}

0x167::disable_lcdc() // B = IE_REGISTER backup
{
	0x167:  xor  A
	0x168:  ld   (0xff00+0x0f), A	// IF_REGISTER = 0
	0x16a:  ld   A, (0xff00+0xff)	// A = IE_REGISTER (0)
	0x16c:  ld   B, A				// B = A (0)
	0x16d:  res  0, A				// A = A & ~1 (disable vblank int)
	0x16f:  ld   (0xff00+0xff), A	// IE_REGISTER = A (0)
__loop: // while (LY != 145)
	0x171:  ld   A, (0xff00+0x44)	// A = LY_REGISTER
	0x173:  cp   145
	0x175:  jr   NZ, __loop

	0x177:  ld   A, (0xff00+0x40)	// A = LCDC_REGISTER
	0x179:  and  ~0x80				// A - A & ~0x80 (~ON)
	0x17b:  ld   (0xff00+0x40), A	// LCDC_REGISTER = A
	0x17d:  ld   A, B				// A = IE_REGISTER backup
	0x17e:  ld   (0xff00+0xff), A	// IE_REGISTER = A
	0x180:  ret
}

0xa8c::reset_memory_range_8000_to_a000()
{
	0xa8c:  ld   HL, 0x8000
	0xa8f:  ld   BC, 0x2000
	0xa92:  xor  A
	0xa93:  jp   0x372a

	0x372a:  push DE			// stack = 0xd8, 0xa11
	0x372b:  ld   D, A			// D = A (0)

__loop: // set from (HL) to (HL + BC) with A value
	0x372c:  ld   A, D			// A = D
	0x372d:  ld   (HL++), A		// HL++ = A (0)
	0x372e:  dec  BC			// BC--
	0x372f:  ld   A, B			// A = B
	0x3730:  or   C				// A = A & C
	0x3731:  jr   NZ, __loop	// if (A != 0) goto __loop

	0x3733:  pop  DE			// stack = 0xa11
	0x3734:  ret
}

0x372a::set_HL_to_HL_plus_BC_with_A_value()
{
	0x372a:  push DE			// stack = 0xd8, 0xa1a
	0x372b:  ld   D, A		

__loop: // set from (HL) to (HL + BC) with A value
	0x372c:  ld   A, D			// A = D
	0x372d:  ld   (HL++), A		// *(HL++) = A (0)
	0x372e:  dec  BC			// BC--
	0x372f:  ld   A, B			// A = B
	0x3730:  or   C				// A = C | B
	0x3731:  jr   NZ, __loop	// if (A != 0) goto __loop

	0x3733:  pop  DE			// DE = 0xd8
	0x3734:  ret
}

0x188::reset_memory_range_c300_to_c3a0()
{
	0x188:  xor  A
	0x189:  ld   HL, 0xc300
	0x18c:  ld   B, 0xa0			// B = 160

__loop: // set 0xc300 to 0xc39f with 0
	0x18e:  ld   (HL++), A			// (HL++) = 0
	0x18f:  dec  B
	0x190:  jr   NZ, __loop

	0x192:  ret
}

0x4750::copy_memory_range_475e_4769_in_ff80()
{
	0x4750:  ld   C, 0x80
	0x4752:  ld   B, 0x0a
	0x4754:  ld   HL, 0x475e

_loop: // copy 0x475e to 0x4769 in 0xff80 to fffe
	0x4757:  ld   A, (HL++)
	0x4758:  ld   (0xff00+C), A
	0x4759:  inc  C
	0x475a:  dec  B
	0x475b:  jr   NZ, __loop

	0x475d:  ret
}

0x787::fill_1024_bytes_of_memory_with_127() // start = H <<  8
{
	0x787:  ld   A, 0x7f			// A = 127
	0x789:  jr   0x01				// goto __next
	0x78b:  ld   A, L
__next:
	0x78c:  ld   DE, 0x0400			// D = 0x04, E = 0x00
	0x78f:  ld   L, E				// L = 0x00

__loop:
	0x790:  ld   (HL++), A
	0x791:  dec  E
	0x792:  jr   NZ, __loop
	0x794:  dec  D
	0x795:  jr   NZ, __loop

	0x797:  ret
}

0xa96::set_sound()
{
	0xa96:  ld   A, 0x02
	0xa98:  ld   (0xc0ef), A			// *(c0ef) = 2
	0xa9b:  ld   (0xc0f0), A			// *(c0f0) = 2
	0xa9e:  xor  A
	0xa9f:  ld   (0xcfae), A			// *(cfae) = 0
	0xaa2:  ld   (0xc0ee), A			// *(c0ee) = 0
	0xaa5:  ld   (0xcfb1), A			// *(cfb1) = 0
	0xaa8:  dec  A						// A = 255
	0xaa9:  jp   0x0e45


	0xe45:  push HL
	0xe46:  push DE
	0xe47:  push BC						// stack = 0x8a, 0x0, 0xa000
	0xe48:  ld   B, A					// B = 255
	0xe49:  ld   A, (0xc0ee)			// A = 0 (*c0ee)
	0xe4c:  and  A
	0xe4d:  jr   Z, __next

	0xe4f:  xor  A
	0xe50:  ld   (0xc02a), A
	0xe53:  ld   (0xc02b), A
	0xe56:  ld   (0xc02c), A
	0xe59:  ld   (0xc02d), A

__next:
	0xe5c:  ld   A, (0xcfae)			// A = 0 (*cfae)
	0xe5f:  and  A
	0xe60:  jr   Z, __next2
/*
	0xe62:  ld   A, (0xc0ee)
	0xe65:  and  A
	0xe66:  jr   Z, 0x51
	0xe68:  xor  A
	0xe69:  ld   (0xc0ee), A
	0xe6c:  ld   A, (0xcfb1)
	0xe6f:  cp   -0x01
	0xe71:  jr   NZ, 0x35
	0xe73:  xor  A
	0xe74:  ld   (0xcfae), A
*/

__next2:
	0xe77:  xor  A
	0xe78:  ld   (0xc0ee), A			// *(c0ee) = 0
	0xe7b:  ld   A, (0xff00+0xb8)		// A = *(ffb8)
	0xe7d:  ld   (0xff00+0xb9), A		// *(ffb9) = A
	0xe7f:  ld   A, (0xc0ef)			// A = *(c0ef)  (2)
	0xe82:  ld   (0xff00+0xb8), A		// *(ffb8) = A  (2)
	0xe84:  ld   (0x2000), A			// *(0x2000) = A  (2)
	0xe87:  cp   0x02					// if (A != 2) goto 
	0xe89:  jr   NZ, __next_cmp
	0xe8b:  ld   A, B					// restore A (255)
	0xe8c:  call 0x4773,2::set_sound_rom_2()

	0xe8f:  jr   __next
/*
	0xe91:  cp   0x08
	0xe93:  jr   NZ, __call
	0xe95:  ld   A, B
	0xe96:  call 0x4d1b
	0xe99:  jr   __next
__call:
	0xe9b:  ld   A, B
	0xe9c:  call 0x4b8a
*/
__next:
	0xe9f:  ld   A, (0xff00+0xb9)	// A = *(ffb9)
	0xea1:  ld   (0xff00+0xb8), A	// *(ffb8) = A (1)
	0xea3:  ld   (0x2000), A		// switch ROM Bank 1
	0xea6:  jr   __end
/*
	0xea8:  ld   A, B
	0xea9:  ld   (0xcfb1), A
	0xeac:  ld   A, (0xcfae)
	0xeaf:  ld   (0xcfaf), A
	0xeb2:  ld   (0xcfb0), A
	0xeb5:  ld   A, B
	0xeb6:  ld   (0xcfae), A
*/
__end:
	0xeb9:  pop  BC
	0xeba:  pop  DE
	0xebb:  pop  HL
	0xebc:  ret
}

0x4773,2::set_sound_rom_2()
{
	0x8773:  ld   (0xc001), A			// *(c001) = 255
	0x8776:  cp   0xff
	0x8778:  jp   Z, 0x4931

	0x8931:  ld   A, 0x80
	0x8933:  ld   (0xff00+0x26), A		// NR52_REGISTER = 0x80
	0x8935:  ld   (0xff00+0x1a), A		// NR30_REGISTER = 0x80
	0x8937:  xor  A
	0x8938:  ld   (0xff00+0x25), A		// NR51_REGISTER = 0
	0x893a:  ld   (0xff00+0x1c), A		// NR32_REGISTER = 0
	0x893c:  ld   A, 0x08
	0x893e:  ld   (0xff00+0x10), A		// NR10_REGISTER = 8
	0x8940:  ld   (0xff00+0x12), A		// NR12_REGISTER = 8
	0x8942:  ld   (0xff00+0x17), A		// NR22_REGISTER = 8
	0x8944:  ld   (0xff00+0x21), A		// NR42_REGISTER = 8
	0x8946:  ld   A, 0x40
	0x8948:  ld   (0xff00+0x14), A		// NR14_REGISTER = 0x40
	0x894a:  ld   (0xff00+0x19), A		// NR24_REGISTER = 0x40
	0x894c:  ld   (0xff00+0x23), A		// NR44_REGISTER = 0x40
	0x894e:  ld   A, 0x77
	0x8950:  ld   (0xff00+0x24), A		// NR50_REGISTER = 0x77
	0x8952:  xor  A
	0x8953:  ld   (0xc000), A			// *(c000) = 0
	0x8956:  ld   (0xc003), A			// *(c003) = 0
	0x8959:  ld   (0xc002), A			// *(c002) = 0
	0x895c:  ld   (0xc0e9), A			// *(c0e9) = 0
	0x895f:  ld   (0xc0eb), A			// *(c0eb) = 0
	0x8962:  ld   (0xc0e6), A			// *(c0e6) = 0
	0x8965:  ld   (0xc0e7), A			// *(c0e7) = 0
	0x8968:  ld   D, 0xa0
	0x896a:  ld   HL, 0xc006
	0x896d:  call 0x4986,2::write_A_in_HL_addr_D_times()

	0x8970:  ld   A, 0x01
	0x8971:  ld   BC, 0x1816	// B = 0x18, C = 0x16
	0x8974:  ld   HL, 0xc0b6
	0x8977:  call 0x4986,2::write_A_in_HL_addr_D_times()

	0x897a:  ld   (0xc0e8), A	// *(c0e8) = 1
	0x897d:  ld   (0xc0ea), A	// *(c0ea) = 1
	0x8980:  ld   A, 0xff
	0x8982:  ld   (0xc004), A	// *(c004) = 255
	0x8985:  ret
}

0x4986, 2::write_A_in_HL_addr_D_times()
{
	0x8986:  ld   B, D
__loop:
	0x8987:  ld   (HL++), A
	0x8988:  dec  B
	0x8989:  jr   NZ, __loop

	0x898b:  ret
}

0x3e9d::switch_bank_19()
{
	0x3e9d:  ld   (0xcc4e), A			// *(0xcc4e) = 0x32
	0x3ea0:  ld   A, (0xff00+0xb8)		// A = *(ffb8)
	0x3ea2:  ld   (0xcf0d), A			// *(cf0d) = A (1)
	0x3ea5:  push AF
	0x3ea6:  ld   A, 0x13
	0x3ea8:  ld   (0xff00+0xb8), A		// *(ffb8) = 0x13
	0x3eaa:  ld   (0x2000), A			// (0x2000) = 0x13
	0x3ead:  call 0x7ea5,19::set_variables()	// bank 19: +0x48000 = 0x4fea5

	0x3eb0:  ld   A, (0xd094)
	0x3eb3:  ld   (0xff00+0xb8), A
	0x3eb5:  ld   (0x2000), A	// switch bank 0x1c
	0x3eb8:  ld   DE, 0x3ebd
	0x3ebb:  push DE
	0x3ebc:  jp   (HL)	// first -> 0x6604 + 0x6c000 = 0x72604

	0x72604:  xor  A
	0x72605:  ld   (0xcf15), A
	0x72608:  call 0x666b
	0x7260b:  ret  NC
	0x7260c:  ld   A, 0x01
	0x7260e:  ld   (0xcf15), A
	0x72611:  call 0x6645
	0x72614:  ld   A, 0x01
	0x72616:  ld   (0xcf27), A
	0x72619:  ld   DE, 0x695e
	0x7261c:  ld   HL, 0x743e
	0x7261f:  call 0x66d5


	0x3ebd:  pop  AF
	0x3ebe:  ld   (0xff00+0xb8), A
	0x3ec0:  ld   (0x2000), A
	0x3ec3:  ret
	0x3ec4:  ld   A, (0xcc4f)
	0x3ec7:  ld   H, A
	0x3ec8:  ld   A, (0xcc50)
	0x3ecb:  ld   L, A
	0x3ecc:  ld   A, (0xcc51)
}

0x7ea5,19::set_variables_1()
{
	0x4fea5:  ld   A, H
	0x4fea6:  ld   (0xcc4f), A			// *(cc4f) = 0xa0
	0x4fea9:  ld   A, L
	0x4feaa:  ld   (0xcc50), A			// *(cc50) = 0
	0x4fead:  ld   HL, 0xcc51
	0x4feb0:  ld   A, D
	0x4feb1:  ld   (HL++), A			// *(cc51) = D (0)
	0x4feb2:  ld   A, E	
	0x4feb3:  ld   (HL++), A			// *(cc52) = E (0)
	0x4feb4:  ld   A, B
	0x4feb5:  ld   (HL++), A			// *(cc53) = B (0)
	0x4feb6:  ld   (HL), C				// *(cc54) = C (8a)
	0x4feb7:  ld   HL, 0x7ed5
	0x4feba:  ld   DE, 0x0000
	0x4febd:  ld   A, (0xcc4e)			// A = *(cc4e)
	0x4fec0:  ld   E, A
	0x4fec1:  add  A					// A += A
	0x4fec2:  add  E					// A += E
	0x4fec3:  ld   E, A					// E = A
	0x4fec4:  jr   NC, 0x01
/*	0x4fec6:  inc  D */
	0x4fec7:  add  HL, DE
	0x4fec8:  ld   D, H
	0x4fec9:  ld   E, L					// DE = HL
	0x4feca:  ld   A, (DE)				// A = *(7f95)
	0x4fecb:  ld   (0xd094), A			// *(0xd094) = A (0x1c)
	0x4fece:  inc  DE
	0x4fecf:  ld   A, (DE)				// L = *(0xd095)
	0x4fed0:  ld   L, A
	0x4fed1:  inc  DE
	0x4fed2:  ld   A, (DE)				// H = *(0xd096)
	0x4fed3:  ld   H, A
	0x4fed4:  ret
}

0x666b,28::()
{
	0x7266b:  ld   HL, 0x694e
	0x7266e:  call 0x65cb,28::()

	0x72671:  call 0x6714
	0x72674:  ld   A, (0xff00+0x00)
	0x72676:  and  0x03
	0x72678:  cp   0x03
	0x7267a:  jr   NZ, 0x4b
	0x7267c:  ld   A, 0x20
	0x7267e:  ld   (0xff00+0x00), A
	0x72680:  ld   A, (0xff00+0x00)
	0x72682:  ld   A, (0xff00+0x00)
	0x72684:  call 0x6714
	0x72687:  call 0x6714
	0x7268a:  ld   A, 0x30
	0x7268c:  ld   (0xff00+0x00), A
	0x7268e:  call 0x6714
}

0x65cb,28::()
{
	0x725cb:  ld   A, (HL)
	0x725cc:  and  0x07
	0x725ce:  ret  Z
	0x725cf:  ld   B, A
	0x725d0:  push BC
	0x725d1:  xor  A
	0x725d2:  ld   (0xff00+0x00), A
	0x725d4:  ld   A, 0x30
	0x725d6:  ld   (0xff00+0x00), A
	0x725d8:  ld   B, 0x10
	0x725da:  ld   E, 0x08
	0x725dc:  ld   A, (HL++)
	0x725dd:  ld   D, A
	0x725de:  bit  0, D
	0x725e0:  ld   A, 0x10
	0x725e2:  jr   NZ, 0x02
	0x725e4:  ld   A, 0x20
	0x725e6:  ld   (0xff00+0x00), A
	0x725e8:  ld   A, 0x30
	0x725ea:  ld   (0xff00+0x00), A
	0x725ec:  rr   D
	0x725ee:  dec  E
	0x725ef:  jr   NZ, -0x13
	0x725f1:  dec  B
	0x725f2:  jr   NZ, -0x1a
	0x725f4:  ld   A, 0x20
	0x725f6:  ld   (0xff00+0x00), A
	0x725f8:  ld   A, 0x30
	0x725fa:  ld   (0xff00+0x00), A
	0x725fc:  call 0x6714
	0x725ff:  pop  BC
	0x72600:  dec  B
	0x72601:  ret  Z
	0x72602:  jr   -0x34
	0x72604:  xor  A
	0x72605:  ld   (0xcf15), A
	0x72608:  call 0x666b
	0x7260b:  ret  NC
	0x7260c:  ld   A, 0x01
	0x7260e:  ld   (0xcf15), A
	0x72611:  call 0x6645
	0x72614:  ld   A, 0x01
	0x72616:  ld   (0xcf27), A
	0x72619:  ld   DE, 0x695e
	0x7261c:  ld   HL, 0x743e
	0x7261f:  call 0x66d5
	0x72622:  xor  A
	0x72623:  ld   (0xcf27), A
	0x72626:  ld   DE, 0x696e
	0x72629:  ld   HL, 0x6bde
	0x7262c:  call 0x66d5
}
